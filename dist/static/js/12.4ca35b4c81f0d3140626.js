(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{LFHq:function(e,t,a){"use strict";var o=a("vJkg");a.n(o).a},VI5Z:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-content-head",{attrs:{headTitle:"节点管理"}}),e._v(" "),a("div",{staticClass:"module-wrapper"},[a("div",{staticClass:"search-part"},[a("div",{staticClass:"search-part-left"},[a("el-button",{staticClass:"search-part-left-btn",attrs:{type:"primary",disabled:e.disabled},on:{click:e.createNodes}},[e._v("新增节点")])],1),e._v(" "),a("div",{staticClass:"search-part-right"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入节点名称"},model:{value:e.nodeName,callback:function(t){e.nodeName=t},expression:"nodeName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"search-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"search-table-content",attrs:{data:e.nodeData}},[e._l(e.nodeHead,function(t){return a("el-table-column",{key:t.enName,attrs:{label:t.name,"show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return["operate"!=t.enName?["nodeActive"===t.enName?a("span",[a("i",{staticClass:"wbs-icon-radio font-6",style:{color:e.textColor(o.row[t.enName])}}),e._v(" "+e._s(e.nodesStatus(o.row[t.enName]))+"\n                            ")]):"nodeIp"===t.enName?a("a",{class:[{"font-color-2956a3":1===o.row.nodeType},{"cursor-pointer":1===o.row.nodeType}],on:{click:function(t){return e.showDetail(o.row)}}},[e._v(e._s(o.row[t.enName]))]):a("span",[e._v(e._s(o.row[t.enName]))])]:void 0]}}],null,!0)})}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[a("i",{staticClass:"wbs-icon-radio font-6",style:{color:e.textColor(t.row.nodeActive)}}),e._v("\n                            "+e._s(e.nodesStatus(t.row.nodeActive))+"\n                        ")])]}}])})],2),e._v(" "),a("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.nodesDialogVisible?a("el-dialog",{staticClass:"dialog-wrapper",attrs:{visible:e.nodesDialogVisible,title:e.nodesDialogTitle,width:"433px","append-to-body":!0,center:!0},on:{"update:visible":function(t){e.nodesDialogVisible=t}}},[a("v-nodesDialog",{attrs:{nodesDialogOptions:e.nodesDialogOptions},on:{success:e.success,close:e.close}})],1):e._e()],1)])],1)};o._withStripped=!0;var n=a("qse9"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"nodesForm",staticClass:"demo-ruleForm",attrs:{model:e.nodesForm,rules:e.rules,"label-width":"108px"}},[a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"节点IP",prop:"nodeIp"}},[a("el-input",{attrs:{placeholder:"请输入IP",disabled:e.nodesForm.disabled},model:{value:e.nodesForm.nodeIp,callback:function(t){e.$set(e.nodesForm,"nodeIp",t)},expression:"nodesForm.nodeIp"}})],1),e._v(" "),e.nodesForm.dShow?a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"前置服务端口",prop:"frontPort"}},[a("el-input",{attrs:{placeholder:"请输入前置服务端口",disabled:e.nodesForm.disabled},model:{value:e.nodesForm.frontPort,callback:function(t){e.$set(e.nodesForm,"frontPort",t)},expression:"nodesForm.frontPort"}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:e.modelClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submit("nodesForm")}}},[e._v("确 定")])],1)],1)};r._withStripped=!0;var s=a("P2sY"),i=a.n(s),d=a("mHBk"),l=(a("bCcq").sha256,{name:"nodesDialog",props:{nodesDialogOptions:{type:Object}},watch:{"nodesDialogOptions.type":{handler:function(e){switch(this.type=e,e){case"creat":this.nodesForm={nodeIp:"",org:"1",frontPort:"",disabled:!1,mDisabled:!1,dShow:!0};break;case"delete":this.nodesForm={nodeIp:this.nodesDialogOptions.data.nodeIp,nodeId:this.nodesDialogOptions.data.nodeId,disabled:!0,mDisabled:!0,dShow:!1}}},deep:!0,immediate:!0}},data:function(){return{type:this.nodesDialogOptions.type,loading:!1,nodesForm:{},rules:{nodeIp:[{required:!0,message:"请输入IP",trigger:"blur"},{pattern:/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,message:"IP格式不正确",trigger:"blur"}],frontPort:[{required:!0,message:"请输入端口",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"请输入正确端口号",trigger:"blur"},{min:1,max:12,message:"长度在 1 到 12 个字符",trigger:"blur"}]}}},mounted:function(){},methods:{modelClose:function(){this.nodesForm=i()({nodeIp:"",frontPort:""}),this.$emit("close",!1)},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.loading=!0,t.getAllAccountInfo()})},getAllAccountInfo:function(){switch(this.type){case"creat":this.getCreatNodesInfo();break;case"delete":this.getDeleteNodesInfo()}},getCreatNodesInfo:function(){var e=this,t={networkId:localStorage.getItem("networkId"),nodeIp:this.nodesForm.nodeIp,nodeType:this.nodesForm.org,frontPort:this.nodesForm.frontPort};Object(d.c)(t,{}).then(function(t){e.loading=!1,0===t.data.code?(e.$message({type:"success",message:"新增成功"}),e.modelClose(),e.$emit("success")):(e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn}))}).catch(function(t){e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn||"系统错误"})})},getDeleteNodesInfo:function(){var e=this;Object(d.h)(this.nodesForm.nodeId,{}).then(function(t){e.loading=!1,0===t.data.code?(e.$message({type:"success",message:"删除成功"}),e.modelClose(),e.$emit("success")):(e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn}))}).catch(function(t){e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn||"系统错误"})})}}}),c=(a("wEUD"),a("KHd+")),p=Object(c.a)(l,r,[],!1,null,"42f0e08a",null);p.options.__file="src/views/group/components/nodesDialog.vue";var u=p.exports,g=(a("DgvE"),a("p5Bo")),h={name:"group",components:{"v-content-head":n.a,"v-nodesDialog":u},watch:{$route:function(){this.urlQuery=this.$root.$route.query}},data:function(){return{nodeName:"",nodes:[],nodeData:[],currentPage:1,pageSize:10,total:0,loading:!1,nodesLoading:!1,nodesDialogVisible:!1,nodesDialogTitle:"",nodesDialogOptions:{},nodeHead:[{enName:"orgName",name:"机构名称"},{enName:"nodeName",name:"节点名称"},{enName:"blockNumber",name:"块高"},{enName:"pbftView",name:"pbftView"},{enName:"nodeIp",name:"ip"},{enName:"p2pPort",name:"p2p端口"},{enName:"rpcPort",name:"rpc端口"}],urlQuery:this.$root.$route.query,disabled:!1}},mounted:function(){this.getNodeTable(),"admin"===localStorage.getItem("root")?this.disabled=!1:this.disabled=!0},methods:{search:function(){this.getNodeTable()},getNodeTable:function(){var e=this;this.loading=!0;var t,a=localStorage.getItem("networkId"),o={networkId:a,pageNumber:this.currentPage,pageSize:this.pageSize};t={nodeName:this.nodeName.replace(/^\s+|\s+$/g,"")},Object(d.t)(o,t).then(function(t){0===t.data.code?(e.total=t.data.totalCount,e.nodeData=t.data.data||[],e.nodeData.forEach(function(e,t){0===e.status?e.value="运行":1===e.status&&(e.value="停止")}),e.loading=!1):(e.loading=!1,e.$message({message:g.a.errCode[t.data.code].cn,type:"error",duration:2e3}))}).catch(function(t){e.loading=!1,e.$message({message:"查询失败！",type:"error",duration:2e3})})},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getNodeTable()},handleCurrentChange:function(e){this.currentPage=e,this.getNodeTable()},textColor:function(e){var t="";switch(e){case 1:t="#58cb7d";break;case 2:t="#ed5454"}return t},nodesStatus:function(e){var t="";switch(e){case 1:t="运行";break;case 2:t="停止"}return t},createNodes:function(){this.nodesDialogVisible=!0,this.nodesDialogTitle="创建节点",this.nodesDialogOptions={type:"creat",data:{nodeIp:""}}},deleteNodes:function(e,t){this.nodesDialogOptions={type:t,data:e},this.nodesDialogVisible=!0,this.nodesDialogTitle="删除节点"},success:function(){this.getNodeTable()},close:function(e){this.nodesDialogVisible=e},showDetail:function(e){2!==e.nodeType&&this.$router.push({path:"hostDetail",query:{nodeIp:e.nodeIp,nodeId:e.nodeId}})}}},m=(a("LFHq"),Object(c.a)(h,o,[],!1,null,"cb5a3176",null));m.options.__file="src/views/group/group.vue";t.default=m.exports},Z34K:function(e,t,a){(e.exports=a("JPst")(!1)).push([e.i,"\n.dialog-footer[data-v-42f0e08a] {\r\n    text-align: right;\r\n    margin-right: -5px;\n}\n.isNone[data-v-42f0e08a] {\r\n    display: none;\n}\n.isShow[data-v-42f0e08a] {\r\n    display: block;\n}\n.demo-ruleForm[data-v-42f0e08a] .el-radio__input.is-checked .el-radio__inner {\r\n    border-color: rgb(75, 143, 229);\r\n    background: rgb(75, 143, 229);\n}\n.demo-ruleForm[data-v-42f0e08a] .el-radio__input.is-checked + .el-radio__label {\r\n    color: rgb(41, 86, 163);\n}\n.demo-ruleForm[data-v-42f0e08a] .el-form-item__label{\r\n    /* padding-right: 4px; */\n}\r\n",""])},fGTp:function(e,t,a){(e.exports=a("JPst")(!1)).push([e.i,'\n.module-wrapper[data-v-cb5a3176] {\r\n    height: 100%;\n}\n.search-part[data-v-cb5a3176] {\r\n    padding: 30px 41px 18px 42px;\r\n    overflow: hidden;\n}\n.search-part[data-v-cb5a3176]::after {\r\n    display: block;\r\n    content: "";\r\n    clear: both;\n}\n.search-part-left[data-v-cb5a3176] {\r\n    float: left;\n}\n.search-part-left-btn[data-v-cb5a3176] {\r\n    border-radius: 20px;\n}\n.search-part-right[data-v-cb5a3176] {\r\n    float: right;\n}\n.search-table[data-v-cb5a3176] {\r\n    padding: 0 40px 0 41px;\n}\n.search-table-content[data-v-cb5a3176] {\r\n    width: 100%;\n}\n.search-table-content[data-v-cb5a3176] td,\r\n.search-table-content[data-v-cb5a3176] th {\r\n    padding: 8px 0;\r\n    font-size: 12px;\n}\n.search-table-content[data-v-cb5a3176] th {\r\n    color: #8598b0;\n}\n.search-table-content[data-v-cb5a3176] td {\r\n    color: #737a86;\n}\n.search-table-detail[data-v-cb5a3176] {\r\n    width: 91%;\r\n    float: right;\n}\n.search-table-detail[data-v-cb5a3176] td,\r\n.search-table-detail[data-v-cb5a3176] th {\r\n    color: #737a86;\n}\n.input-with-select[data-v-cb5a3176] .el-input__inner {\r\n    border-top-left-radius: 20px;\r\n    border-bottom-left-radius: 20px;\r\n    border: 1px solid #eaedf3;\r\n    -webkit-box-shadow: 0 3px 11px 0 rgba(159, 166, 189, 0.11);\r\n            box-shadow: 0 3px 11px 0 rgba(159, 166, 189, 0.11);\n}\n.input-with-select[data-v-cb5a3176] .el-input-group__append {\r\n    border-top-right-radius: 20px;\r\n    border-bottom-right-radius: 20px;\r\n    -webkit-box-shadow: 0 3px 11px 0 rgba(159, 166, 189, 0.11);\r\n            box-shadow: 0 3px 11px 0 rgba(159, 166, 189, 0.11);\n}\n.input-with-select[data-v-cb5a3176] .el-button {\r\n    border: 1px solid #20D4D9;\r\n    border-radius: inherit;\r\n    background: #20D4D9;\r\n    color: #fff;\n}\r\n',""])},m15M:function(e,t,a){var o=a("Z34K");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("SZ7m").default)("fe53043a",o,!1,{})},vJkg:function(e,t,a){var o=a("fGTp");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("SZ7m").default)("6b68d358",o,!1,{})},wEUD:function(e,t,a){"use strict";var o=a("m15M");a.n(o).a}}]);