(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"0te/":function(t,e,a){var n=a("pTm/");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("SZ7m").default)("68081abb",n,!1,{})},"BSt/":function(t,e,a){"use strict";a.r(e);var n=a("OOXg"),s=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e.default=s.a},OOXg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(a("gDS+")),s=a("mHBk"),i=a("DgvE"),o=c(a("p5Bo")),r=c(a("oYx3"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"transactionDetail",props:{transHash:{type:String}},data:function(){return{detail:null,transactionData:{},contractList:[],decodeData:{},funcData:"",showDecode:!1,buttonTitle:"还原",eventTitle:"还原",abiType:[],methodId:"",inputData:[],eventLog:[],buttonSHow:!1,eventSHow:!1,transactionTo:null,bin:"",createTime:null,eventDataShow:!0,inputButtonShow:!0,eventButtonShow:!0,userList:[]}},mounted:function(){this.getHashTransactionInfo(),this.getUser()},destroyed:function(){localStorage.setItem("transaction","")},methods:{link:function(t){r.default.push({path:"/privateKeyManagement",query:{userName:t}})},copyPubilcKey:function(t){var e=this;t?this.$copyText(t).then(function(t){e.$message({type:"success",showClose:!0,message:"复制成功",duration:2e3})}):this.$message({type:"fail",showClose:!0,message:"key为空，不复制。",duration:2e3})},getHashTransactionInfo:function(){var t=this,e={groupId:localStorage.getItem("groupId"),transHash:this.transHash};(0,s.hashTransactionInfo)(e,{}).then(function(e){0===e.data.code?(t.transactionData=e.data.data,e.data.data?(t.getCreatTime(e.data.data.blockNumber),t.getAdderss(),e.data.data.to&&"0x0000000000000000000000000000000000000000"!=e.data.data.to?t.getMethod(e.data.data.input):t.getDeloyAbi(e.data.data.input)):t.$message({type:"error",message:"无法查询到交易信息"})):t.$message({type:"error",message:o.default.errCode[e.data.code].cn})}).catch(function(e){t.$message({type:"error",message:"系统错误!"})})},getMethod:function(t){var e=this,a={groupId:localStorage.getItem("groupId"),data:t.substring(0,10)};(0,s.getFunctionAbi)(a,{}).then(function(a){0==a.data.code?e.decodefun(t,a.data.data):e.$message({type:"error",message:o.default.errCode[response.data.code].cn})}).catch(function(t){e.$message({type:"error",message:"系统错误!"})})},getDeloyAbi:function(t){var e=this;if(t&&"0x"!=t){var a={groupId:localStorage.getItem("groupId"),partOfBytecodeBin:t.substring(2)};(0,s.getAbi)(a).then(function(t){0==t.data.code?e.decodeDeloy(t.data.data):e.$message({type:"error",message:o.default.errCode[response.data.code].cn})}).catch(function(t){e.$message({type:"error",message:"系统错误!"})})}},getUser:function(){var t=this,e={groupId:localStorage.getItem("groupId"),pageNumber:1,pageSize:1e3};(0,s.getUserList)(e).then(function(e){0===e.data.code?t.userList=e.data.data:t.$message({type:"error",message:o.default.errCode[response.data.code].cn})}).catch(function(e){t.$message({type:"error",message:"系统错误!"})})},getCreatTime:function(t){var e=this,a={groupId:localStorage.getItem("groupId"),blockNumber:t};(0,s.getBlockDetail)(a).then(function(t){0===t.data.code?e.createTime=(0,i.getDate)(t.data.data.timestamp):e.$message({type:"error",message:o.default.errCode[response.data.code].cn})}).catch(function(t){e.$message({type:"error",message:"系统错误!"})})},handleClick:function(t,e){"event"==t.label&&this.decodeEventClick()},decode:function(){this.showDecode?(this.buttonTitle="还原",this.showDecode=!1):(this.buttonTitle="解码",this.showDecode=!0),this.eventDataShow?(this.buttonTitle="解码",this.eventDataShow=!1):(this.buttonTitle="还原",this.eventDataShow=!0)},decodeAbi:function(t,e){this.inputButtonShow=!0;var a=this.transactionData.input;this.transactionTo=this.transactionData.to,this.transactionTo?this.decodefun(a,this.transactionTo):(this.methodId=a.substring(0,10),this.decodeDeloy(this.bin))},getAdderss:function(){var t=this,e={groupId:localStorage.getItem("groupId"),transHash:this.transHash};(0,s.getTransactionReceipt)(e,{}).then(function(e){0===e.data.code?t.eventLog=e.data.data.logs:t.$message({type:"error",message:o.default.errCode[e.data.code].cn})}).catch(function(e){t.$message({type:"error",message:"系统错误！"})})},decodeEventClick:function(){for(var t=this,e=function(e){var a={groupId:localStorage.getItem("groupId"),data:t.eventLog[e].topics[0]};(0,s.getFunctionAbi)(a).then(function(a){0==a.data.code&&a.data.data?(t.eventLog[e]=t.decodeEvent(a.data.data,t.eventLog[e]),setTimeout(function(){t.eventSHow=!0},200)):0!==a.data.code&&t.$message({type:"error",message:o.default.errCode[a.data.code].cn})}).catch(function(e){t.$message({type:"error",message:"系统错误！"})})},a=0;a<this.eventLog.length;a++)e(a)},decodeEvent:function(t,e){var a=new Web3(Web3.givenProvider);t.abiInfo=JSON.parse(t.abiInfo);var s=e;s.eventTitle="还原",s.eventDataShow=!0,s.eventButtonShow=!0,s.eventName=t.abiInfo.name+"(";for(var i=0;i<t.abiInfo.inputs.length;i++)i==t.abiInfo.inputs.length-1?s.eventName=s.eventName+t.abiInfo.inputs[i].type+" "+t.abiInfo.inputs[i].name:s.eventName=s.eventName+t.abiInfo.inputs[i].type+" "+t.abiInfo.inputs[i].name+",";s.eventName=s.eventName+")";var o=a.eth.abi.decodeLog(t.abiInfo.inputs,s.data,s.topics);for(var r in s.outData={},s.eventLgData=[],o)(+r||0==+r)&&(s.outData[r]=o[r]);if(t.abiInfo.inputs.length&&"{}"!=(0,n.default)(s.outData)){var c=function(e){t.abiInfo.inputs.forEach(function(t,a){a==e&&(s.eventLgData[a]={},s.eventLgData[a].name=t.name,s.eventLgData[a].data=s.outData[e])})};for(var l in s.outData)c(l)}return s},decodeButtonEvent:function(t){this.eventLog[t].eventDataShow?(this.$set(this.eventLog[t],"eventDataShow",!1),this.$set(this.eventLog[t],"eventTitle","解码"),this.$set(this.eventLog,t,this.eventLog[t])):(this.$set(this.eventLog[t],"eventDataShow",!0),this.$set(this.eventLog[t],"eventTitle","还原"),this.$set(this.eventLog,t,this.eventLog[t]))},decodefun:function(t,e){var a=this,s=new Web3(Web3.givenProvider);this.userList.length&&this.userList.forEach(function(t){t.address==a.transactionData.from&&(a.transactionData.user=t.userName)}),this.methodId=t.substring(0,10);var i="0x"+t.substring(10);if(e){if(e.abiInfo=JSON.parse(e.abiInfo),e.abiInfo.inputs.forEach(function(t,e){t&&t.type&&t.name?a.abiType[e]=t.type+" "+t.name:t&&t.name?a.abiType[e]=t.name:t&&t.type?a.abiType[e]=t.type:t&&(a.abiType[e]=t)}),this.funcData=e.abiInfo.name,e.abiInfo.inputs.length&&(this.decodeData=s.eth.abi.decodeParameters(e.abiInfo.inputs,i),"{}"!=(0,n.default)(this.decodeData))){var o=function(t){e.abiInfo.inputs.forEach(function(e,n){e&&e.name&&e.type?t===e.name&&(a.inputData[n]={},a.inputData[n].name=e.name,a.inputData[n].type=e.type,a.inputData[n].data=a.decodeData[t]):e&&n==t&&(a.inputData[n]={},a.inputData[n].type=e,a.inputData[n].data=a.decodeData[t])})};for(var r in this.decodeData)o(r)}this.showDecode=!1,this.buttonTitle="还原"}},decodeDeloy:function(t){var e=this;if(this.userList.length&&this.userList.forEach(function(t){t.address==e.transactionData.from&&(e.transactionData.user=t.userName)}),t){var a=JSON.parse(t.contractAbi);this.funcData=t.contractName,a.forEach(function(t){"constructor"==t.type&&t.inputs.forEach(function(t,a){t&&t.type&&t.name?e.abiType[a]=t.type+" "+t.name:t&&t.name?e.abiType[a]=t.name:t&&t.type?e.abiType[a]=t.type:t&&(e.abiType[a]=t)})}),this.showDecode=!1,this.buttonTitle="还原"}else this.buttonSHow=!1,this.showDecode=!1}}}},bxjF:function(t,e,a){"use strict";a.r(e);var n=a("yWUI"),s=a("BSt/");for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);a("ibCv");var o=a("KHd+"),r=Object(o.a)(s.default,n.a,n.b,!1,null,"72b4796f",null);r.options.__file="src/components/transactionDetail.vue",e.default=r.exports},ibCv:function(t,e,a){"use strict";var n=a("0te/");a.n(n).a},"pTm/":function(t,e,a){(t.exports=a("JPst")(!1)).push([t.i,"\n.label[data-v-72b4796f] {\r\n    display: inline-block;\r\n    width: 120px;\r\n    font-weight: bold;\r\n    vertical-align: top;\r\n    font-size: 12px;\n}\n.item[data-v-72b4796f] {\r\n    padding: 3px 0;\n}\n.input[data-v-72b4796f] {\r\n    display: inline-block;\r\n    font-size: 0;\r\n    vertical-align: top;\n}\n.input span[data-v-72b4796f] {\r\n    font-size: 12px;\n}\n.input-data[data-v-72b4796f] {\r\n    display: inline-block;\r\n    width: 100%;\r\n    padding: 10px;\r\n    max-height: 200px;\r\n    overflow: auto;\r\n    word-break: break-all;\r\n    word-wrap: break-word;\r\n    -webkit-box-sizing: border-box;\r\n            box-sizing: border-box;\n}\n.input-data-from[data-v-72b4796f] {\r\n    display: inline-block;\r\n    width: calc(100% - 200px);\r\n    height: auto;\r\n    word-break: break-all;\r\n    word-wrap: break-word;\r\n    -webkit-box-sizing: border-box;\r\n            box-sizing: border-box;\n}\n.input-label[data-v-72b4796f] {\r\n    padding-bottom: 15px;\n}\n.input-label .label[data-v-72b4796f] {\r\n    width: 80px;\r\n    font-size: 12px;\n}\n.detail-input-content[data-v-72b4796f] {\r\n    display: inline-block;\r\n    width: calc(100% - 200px);\r\n    height: auto;\r\n    border: 1px solid #eaedf3;\r\n    border-radius: 4px;\r\n    font-size: 12px;\n}\r\n",""])},yWUI:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"0"}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{label:"input"}},[a("div",[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("Block Height:")]),t._v(" "),a("span",[t._v(t._s(t.transactionData.blockNumber||""))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("From:")]),t._v(" "),a("span",{staticClass:"input-data-from"},[a("span",[t._v(t._s(t.transactionData.from))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.transactionData&&t.transactionData.user,expression:"transactionData && transactionData.user"}]},[t._v("=>")]),t._v(" "),a("span",{staticClass:"link",on:{click:function(e){return t.link(t.transactionData.user)}}},[t._v(t._s(t.transactionData.user||""))])])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"部署合约，to字段为空。",placement:"top-start"}},[a("i",{staticClass:"el-icon-info"})]),t._v(" "),a("span",[t._v("To:")])],1),t._v(" "),a("span",[t._v(t._s(t.transactionData.to||"null"))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("Timestamp:")]),t._v(" "),a("span",[t._v(t._s(t.createTime||""))])]),t._v(" "),a("div",{staticClass:"item",staticStyle:{"font-size":"0"}},[a("span",{staticClass:"label"},[t._v("Input:")]),t._v(" "),a("div",{staticClass:"detail-input-content"},[t.showDecode?a("span",{staticClass:"input-data"},[t._v(t._s(t.transactionData.input||""))]):t._e(),t.showDecode?a("br"):t._e(),t._v(" "),t.showDecode?t._e():a("div",{staticClass:"input-data"},[a("div",{staticClass:"input-label"},[a("span",{staticClass:"label"},[t._v("function")]),t._v(" "),a("span",[t._v(t._s(t.funcData+"("+t.abiType+")"))])]),t._v(" "),a("div",{staticClass:"input-label"},[a("span",{staticClass:"label"},[t._v("methodId")]),t._v(" "),a("span",[t._v(t._s(t.methodId))])]),t._v(" "),a("div",{staticClass:"input-label"},[a("span",{staticClass:"label"},[t._v("data")]),t._v(" "),t.inputData.length?a("el-table",{staticStyle:{display:"inline-block",width:"400px"},attrs:{data:t.inputData}},[t.inputData[0].name?a("el-table-column",{attrs:{prop:"name",label:"name",align:"left"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"type",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data",label:"data",align:"left","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"wbs-icon-copy font-12 copy-public-key",attrs:{title:"复制"},on:{click:function(a){return t.copyPubilcKey(e.row.data)}}}),t._v(" "),a("span",[t._v(t._s(e.row.data))])]}}],null,!1,1673674267)})],1):t._e()],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.inputButtonShow,expression:"inputButtonShow"}],staticClass:"item"},[a("span",{staticClass:"label"}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.decode}},[t._v(t._s(t.buttonTitle))])],1)])])]),t._v(" "),t.eventLog.length>0?a("el-tab-pane",{attrs:{label:"event"},on:{click:t.decodeEventClick}},t._l(t.eventLog,function(e,n){return t.eventSHow?a("div",[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("Address :")]),t._v(" "),a("span",[t._v(t._s(e.address))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("Name :")]),t._v(" "),a("span",[t._v(t._s(e.eventName))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("Topics :")]),t._v(" "),a("div",{staticStyle:{display:"inline-block",width:"800px"}},t._l(e.topics,function(e,n){return a("div",{key:e},[t._v("["+t._s(n)+"] "+t._s(e))])}),0)]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("Data :")]),t._v(" "),a("div",{staticClass:"detail-input-content"},[e.eventDataShow?t._e():a("span",{staticClass:"input-data"},[t._v(t._s(e.data))]),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.eventDataShow,expression:"item.eventDataShow"}],staticClass:"input-data",staticStyle:{display:"inline-block",width:"100%"},attrs:{data:e.eventLgData}},[a("el-table-column",{attrs:{prop:"name",width:"150",label:"name",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data",label:"data",align:"left","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"wbs-icon-copy font-12 copy-public-key",attrs:{title:"复制"},on:{click:function(a){return t.copyPubilcKey(e.row.data)}}}),t._v(" "),a("span",[t._v(t._s(e.row.data))])]}}],null,!0)})],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.eventButtonShow,expression:"item.eventButtonShow"}],staticClass:"item"},[a("span",{staticClass:"label"}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.decodeButtonEvent(n)}}},[t._v(t._s(t.eventTitle))])],1)]):t._e()}),0):t._e()],1)],1)},s=[];n._withStripped=!0,a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s})}}]);